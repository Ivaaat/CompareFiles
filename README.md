# CompareFiles

## Описание

File Comparison Tool — это приложение, которое собирает файлы из двух директорий на основе указанных масок и путей, сравнивает их и создает отчеты. Программа позволяет применять регулярные выражения к именам файлов и выполнять сравнение содержимого файлов в зависимости от заданных параметров. 

## Установка

1. Убедитесь, что у вас установлен Python (версия 3.6 и выше).
2. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/Ivaaat/CompareFiles.git
   cd CompareFiles
   ```



## Настройка

Перед запуском приложения, вам необходимо заполнить файл конфигурации **config_comparison.ini**. Примерный файл настроек можно использовать в качестве шаблона:

```
[general]
log_in_file = True
log_file_max_size = 100
log_file_backup_count = 1
max_broken_attributes = 100
regex_rename_files = .*
mask_files_etalon = *msk*
mask_files_source = *msk*
encode_files_etalon = utf-8
encode_files_source = utf-8
num_unique_keys = 5
compare_strategy = all  # Можно использовать 'keys' для сравнения по ключевым полям
type_delimiter = fields  # Или 'char' для символов
prepare_etalon = False
prepare_source = False

[unf_output]
name_output = foris_cisco
etalons = # путь к файлам
sources = # путь к файлам
result_dir = # путь к отчетам
delimiter= ,
key_fields = 0
excluded_fields = 9
num_records_header = 1
num_records_header = -2
field_sizes_body = 6,5,5,14,10,10,21,21,21,31,31,17,10,10,5,10,5,10,3,10,10,1,1,1,1,10,20,20,10,10,5,5,5,15,15
field_names_body = 6,5,5,14,10,10,21,21,21,31,31,17,10,10,5,10,5,10,3,10,10,1,1,1,1,10,20,20,10,10,5,5,5,15,15
```

### Параметры конфигурации

- **[general]**: Общие настройки для логирования и параметров сравнения.
  - `log_in_file`: Включает логирование в файле.
  - `log_file_max_size`: Максимальный размер журнала.
  - `regex_rename_files`: Регулярное выражение для переименования файлов.
  - `mask_files_etalon`, `mask_files_source`: Маски файлов для выбора эталонных и исходных файлов.
  - `compare_strategy`: Стратегия сравнения (`all` для сравнения всех полей или `keys` для ключевых полей).

- **[unf_output]**: Параметры для сравнения и хранения результатов.


## Использование

Запустите приложение с помощью команды:

```bash
python сompare.py --config <путь_к_файлу_конфигурации> 
```

Пример:

```bash
python сompare.py --config config.ini
```

Можно использовать сокрщение `-c` вместо `--config`

## Формат отчетов

Приложение формирует несколько отчетов:
Значение **name_output** берется из файла конфигурации

  1. Итоговый CSV отчет: Каждый отчет будет назван в формате name_output_дата_время_Comparison_Result.csv (например, foris_cisco_08-08-24_144819_Comparison_Result.csv), и будет содержать статистику по каждому   
     файлу.

  2. body_non_matching_records.txt: Этот отчет включает строки, которые не попали под совпадение.

  3. Атрибутные отчеты: Результаты сравнения по каждому атрибуту будут сохранены в формате body_num_fields_X атрибут_name.report.

  4. Логи: Отчет с логами будет записан в файл name_output_дата_время.log (например, foris_cisco_24-09-24_134931.log).

  5. Regexp not match in etl or src: Отчет со списком файлов, не подходящих под регулярное выражение, будет сохранен отдельно.

## Поддержка

Если у вас возникли вопросы или предложения по улучшению, пожалуйста, откройте issue на GitHub:

[Открыть issue](https://github.com/Ivaaat/CompareFiles.git)


### Примечания:
- Настройте пути и значения в файле конфигурации в зависимости от ваших нужд.
- Убедитесь, что упомянутые параметры и секции соответствуют функциональности вашего приложения.
